services:
  minecraft:
    build:
      context: .
    image: dragon-egg-lightning:latest
    container_name: ${CONTAINER_NAME}
    restart: unless-stopped
    ports:
      - "25565:25565"
      - "25575:25575"
    environment:
      - MEMORYSIZE=${MEMORYSIZE}
      - EULA=${EULA}
      - TYPE=${TYPE}
      - VERSION=${VERSION}
      - ONLINE_MODE=${ONLINE_MODE}
      - MAX_PLAYERS=${MAX_PLAYERS}
      - RCON_PORT=${RCON_PORT}
      - RCON_PASSWORD=${RCON_PASSWORD}
      - ENABLE_RCON=${ENABLE_RCON}
      - ADMIN_USERNAME=${ADMIN_USERNAME}
    volumes:
      # Mount only specific files/directories, not the entire /data
      - ./server-data/eula.txt:/data/eula.txt:rw
      - ./server-data/ops.json:/data/ops.json:rw
      - ./server-data/server.properties:/data/server.properties:rw
      - ./server-data/world:/data/world:rw
    stdin_open: true
    tty: true
    networks:
      - minecraft-network

networks:
  minecraft-network:
    driver: bridge
